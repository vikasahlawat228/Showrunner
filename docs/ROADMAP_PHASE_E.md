# Phase E: Advanced Systems & Frontend Orchestration
**Status:** ‚úÖ Complete
**Objective:** With the backend now capable of true event sourcing, centralized context management, and dynamic agent orchestration (completed in Phase D), we must expose these powers to the frontend and seal the remaining architectural gaps (RAG & real-time file syncing).

---

## The Master Plan

Phase E bridge the gap between our powerful new backend capabilities and the user interface, while completing the final backend piece (semantic search). We divide this into 4 parallel tracks designed for outsourced chat sessions.

### Track 1: RAG & Semantic Retrieval (Session 16)
**Goal:** Upgrade the Knowledge Graph with a lightweight vector store for semantic context retrieval.
- **Why:** The Context Engine currently relies on exact ID lookups. We need semantic search for `/zen` \@mentions and pipeline prompt generation.
- **Reference Prompt:** `agents/tasks/session_16_rag_integration.md` (Previously drafted)

### Track 2: Real-time File System Watcher (Session 17)
**Goal:** Keep the Knowledge Graph and frontend instantly in sync with external YAML edits (e.g., users editing files in VSCode).
- **Why:** Showrunner's source of truth is the file system. Currently, `sync_all()` only runs on boot.
- **Target:** Build a `watchdog` service that triggers `SQLiteIndexer` and pushes a "GRAPH_UPDATED" SSE event to the frontend.
- **Reference Prompt:** `agents/tasks/session_17_file_watcher.md`

### Track 3: The Multi-Agent UI (Session 18)
**Goal:** Expose the new `AgentDispatcher` in the frontend so users know *who* they are talking to.
- **Why:** The backend now routes tasks to specific agents (Architect, Director, Analyst, Wizard). The `/director` badge and `PromptReviewModal` should update their avatar, name, and color based on the active agent.
- **Target:** Update `DirectorControls.tsx` and `PromptReviewModal.tsx`.
- **Reference Prompt:** `agents/tasks/session_18_agent_ui.md`

### Track 4: Dynamic Timeline UI (Session 19)
**Goal:** The Timeline View must react to the new `EventService` streams generated by Zen Mode, Pipelines, and Storyboard.
- **Why:** Event sourcing is now logging every action. The Timeline UI needs to auto-refresh and accurately visualize these cross-domain events.
- **Target:** Update `TimelineView.tsx` to poll or subscribe to events and render icons for different event types (e.g., üé¨ for panel_created, ‚úçÔ∏è for fragment_saved).
- **Reference Prompt:** `agents/tasks/session_19_frontend_timeline.md`

---

## Instructions for Orchestration
1. Open **4 separate AI chat interfaces**.
2. Copy the contents of `session_16_rag_integration.md` into Chat A.
3. Copy the contents of `session_17_file_watcher.md` into Chat B.
4. Copy the contents of `session_18_agent_ui.md` into Chat C.
5. Copy the contents of `session_19_frontend_timeline.md` into Chat D.
6. Review the pull requests / outputs and integrate them back into the main branch.
